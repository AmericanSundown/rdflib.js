<!DOCTYPE html>
<!-- vim: set ts=2 sts=2 sw=2 et: -->
<html lang="en" class="no-js" ng-app="Test">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    <script src="file:///Users/joe/git/linkeddata/rdflib.js/dist/rdflib.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.5/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.js"></script>
    <script>

      // ** rdflib.js
      FOAF = $rdf.Namespace("http://xmlns.com/foaf/0.1/")
      kb = $rdf.graph();
      fetch = $rdf.fetcher(kb);
      uri = 'http://bblfish.net/people/henry/card#me';
      doc = uri.slice(0, uri.indexOf('#'));
      card = $rdf.sym(doc);
      cardi = $rdf.sym(uri);

      // ** angular
      ngTest = angular.module('Test', []);
      function IC($scope, $http, $timeout) {
        fetch.nowOrWhenFetched(doc, undefined, function() {
          $scope.$apply(function(){
            $scope.knows = kb.each(cardi, FOAF('knows'))
          });
        });
      }

    </script>
  </head>
  <body ng-cloak class="ng-cloak">
    <div ng-controller="IC">
      <ul>
        <li ng-repeat="i in knows">
          <p>{{i.uri}}</p>
        </li>
      </ul>
    </div>
  </body>
</html>
